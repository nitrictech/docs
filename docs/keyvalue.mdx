---
description: 'Key value stores with Nitric'
---

# Key/Value

Nitric provides a simple way to work with key/value stores in your applications. Key/value stores are perfect for storing and retrieving data using unique keys, with fast access times and simple data structures.

## Quick Start

Here's a minimal example to get you started:

<CodeSwitcher tabs>

```javascript !!
import { kv } from '@nitric/sdk'

const store = kv('my-store').allow('get', 'set')

// Store a value
await store.set('user-1', { name: 'John', age: 30 })

// Retrieve a value
const user = await store.get('user-1')
```

```typescript !!
import { kv } from '@nitric/sdk'

const store = kv('my-store').allow('get', 'set')

// Store a value
await store.set('user-1', { name: 'John', age: 30 })

// Retrieve a value
const user = await store.get('user-1')
```

```python !!
from nitric.resources import kv
from nitric.application import Nitric

store = kv('my-store').allow('get', 'set')

# Store a value
await store.set('user-1', { "name": "John", "age": 30 })

# Retrieve a value
user = await store.get('user-1')

Nitric.run()
```

```go !!
import (
  "context"
  "github.com/nitrictech/go-sdk/nitric"
  "github.com/nitrictech/go-sdk/nitric/keyvalue"
)

func main() {
  store := nitric.NewKv("my-store").Allow(keyvalue.KvStoreGet, keyvalue.KvStoreSet)

  // Store a value
  _ = store.Set(context.TODO(), "user-1", map[string]interface{}{
    "name": "John",
    "age":  30,
  })

  // Retrieve a value
  user, _ := store.Get(context.TODO(), "user-1")

  nitric.Run()
}
```

```dart !!
import 'package:nitric_sdk/nitric.dart';

final store = Nitric.kv("my-store").allow([
  KeyValueStorePermission.get,
  KeyValueStorePermission.set,
]);

// Store a value
await store.set("user-1", {
  "name": "John",
  "age": 30
});

// Retrieve a value
final user = await store.get("user-1");
```

</CodeSwitcher>

## Core Concepts

### Key/Value Store

A key/value store is a database that stores data as key-value pairs. Each value is accessed using a unique key, making lookups fast and efficient.

### Permissions

Key/value stores require explicit permissions for operations:

- `get`: Read values or list keys
- `set`: Create or update values
- `delete`: Remove values

### Keys and Values

- **Keys**: Unique strings that identify values
- **Values**: Any JSON-serializable data (objects, arrays, strings, numbers, etc.)

## Common Operations

### Setting Values

<CodeSwitcher tabs>

```javascript !!
const store = kv('my-store').allow('set')

// Create or update a value
await store.set('user-1', { name: 'John', age: 30 })
```

```typescript !!
const store = kv('my-store').allow('set')

// Create or update a value
await store.set('user-1', { name: 'John', age: 30 })
```

```python !!
store = kv('my-store').allow('set')

// Create or update a value
await store.set('user-1', { "name": "John", "age": 30 })
```

```go !!
store := nitric.NewKv("my-store").Allow(keyvalue.KvStoreSet)

// Create or update a value
_ = store.Set(context.TODO(), "user-1", map[string]interface{}{
  "name": "John",
  "age":  30,
})
```

```dart !!
final store = Nitric.kv("my-store").allow([
  KeyValueStorePermission.set,
]);

// Create or update a value
await store.set("user-1", {
  "name": "John",
  "age": 30
});
```

</CodeSwitcher>

### Getting Values

<CodeSwitcher tabs>

```javascript !!
const store = kv('my-store').allow('get')

const user = await store.get('user-1')
```

```typescript !!
const store = kv('my-store').allow('get')

const user = await store.get('user-1')
```

```python !!
store = kv('my-store').allow('get')

user = await store.get('user-1')
```

```go !!
store := nitric.NewKv("my-store").Allow(keyvalue.KvStoreGet)

user, _ := store.Get(context.TODO(), "user-1")
```

```dart !!
final store = Nitric.kv("my-store").allow([
  KeyValueStorePermission.get,
]);

final user = await store.get('user-1');
```

</CodeSwitcher>

### Deleting Values

<CodeSwitcher tabs>

```javascript !!
const store = kv('my-store').allow('delete')

await store.delete('user-1')
```

```typescript !!
const store = kv('my-store').allow('delete')

await store.delete('user-1')
```

```python !!
store = kv('my-store').allow('delete')

await store.delete('user-1')
```

```go !!
store := nitric.NewKv("my-store").Allow(keyvalue.KvStoreDelete)

_ = store.Delete(context.TODO(), "user-1")
```

```dart !!
final store = Nitric.kv("my-store").allow([
  KeyValueStorePermission.delete,
]);

await store.delete("user-1");
```

</CodeSwitcher>

### Listing Keys

<CodeSwitcher tabs>

```javascript !!
const store = kv('my-store').allow('get')

// List all keys
for await (const key of store.keys()) {
  console.log(key)
}

// List keys with prefix
for await (const key of store.keys('user-')) {
  console.log(key)
}
```

```typescript !!
const store = kv('my-store').allow('get')

// List all keys
for await (const key of store.keys()) {
  console.log(key)
}

// List keys with prefix
for await (const key of store.keys('user-')) {
  console.log(key)
}
```

```python !!
store = kv('my-store').allow('get')

# List all keys
async for key in store.keys():
  print(key)

# List keys with prefix
async for key in store.keys('user-'):
  print(key)
```

```go !!
store := nitric.NewKv("my-store").Allow(keyvalue.KvStoreGet)

// List all keys
keys, _ := store.Keys(context.TODO())
for {
  key, err := keys.Recv()
  if err != nil {
    break
  }
  fmt.Println(key)
}

// List keys with prefix
keys, _ := store.Keys(context.TODO(), keyvalue.WithPrefix("user-"))
for {
  key, err := keys.Recv()
  if err != nil {
    break
  }
  fmt.Println(key)
}
```

```dart !!
final store = Nitric.kv("my-store").allow([
  KeyValueStorePermission.get,
]);

// List all keys
final keys = await store.keys();
keys.forEach((String key) {
  print(key);
});

// List keys with prefix
final userKeys = await store.keys(prefix: "user-");
userKeys.forEach((String key) {
  print(key);
});
```

</CodeSwitcher>

## Cloud Provider Support

Each cloud provider comes with a set of default services used when deploying resources. You can find the default services for each cloud provider below.

<Tabs>

<TabItem label="AWS">

Key value stores are mapped to DynamoDB in AWS. For more details about the AWS implementation, including configuration options and limitations, see the [AWS Key/Value documentation](/providers/mappings/aws/keyvalue).

</TabItem>

<TabItem label="Azure">

Key value stores are mapped to Azure Cosmos DB in Azure. For more details about the Azure implementation, including configuration options and limitations, see the [Azure Key/Value documentation](/providers/mappings/azure/keyvalue).

</TabItem>

<TabItem label="GCP">

Key value stores are mapped to Firestore in Google Cloud. For more details about the GCP implementation, including configuration options and limitations, see the [Google Cloud Key/Value documentation](/providers/mappings/gcp/keyvalue).

</TabItem>

</Tabs>

<Note>
  When running locally, key value stores use a local implementation for
  development and testing.
</Note>
