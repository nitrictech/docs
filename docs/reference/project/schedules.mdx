Configuring cron jobs directly on servers used to be quite common. However, Serverless environments where servers only run in response to requests/load make this more challenging. Directly configuring servers was also error prone, since the schedule configuration didn't employ version control and CI/CD processes.

Nitric Schedules enable a Serverless approach to scheduled tasks, allowing you to trigger batch and fan-out workloads on a fixed cadence. Schedules are defined directly in the Nitric Stack Definition, enabling the use of version control and automated deployments for all scheduled activities. Schedule triggers are delivered via Topics using [Events](./events), ensuring compatibility with both Serverless and traditional infrastructure.

## Creating a Schedule

Schedules are purely configuration in a Nitric Stack, requiring no code.

To start, let's look at an example, where a [Service](./services) is triggered via a Topic every 5 minutes. In this example we define a new schedule named `my-schedule', and a cron expression for that schedule that defines when it runs. Additionally, the schedule defines what (event) and where (topic) to send the payload generated by the schedule.

```yaml
services:
	my-service:
		path: my-service
		runtime: function/golang15
		# A standard topic trigger is defined, so that the function will respond to events
		triggers:
			topics:
				- my-topic

# A topic is defined for the events
topics:
	my-topic: {}

# a schedule is defined for what, where and when to send
schedules:
	my-schedule:
		# an aws example expression which runs every 15 mins
		expression: '0/15 * * * ? *'
		target:
			type: topic
			name: my-topic
		event:
			payloadType: example-payload
			payload:
				example: payload
```

> Schedules are currently only supported on AWS and GCP as cron expressions. Support for other platforms is coming soon!

> See the following references for documentation on how to define expressions:

- https://cloud.google.com/scheduler/docs/configuring/cron-job-schedules
- https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html

> Currently, only triggers via topics are possible with triggers directly to services & queues coming soon.

## Testing Schedules

> Coming Soon

Currently, local execution and testing of schedules is not supported. Local and manual testing of schedules is on our backlog to be completed soon.

In the meantime, you can directly test the services that respond to scheduled triggers by sending HTTP requests to those services with the same payload as defined in your schedule (Events and Requests are treated the same when writing functions). Schedules themselves need to be tested in a supported cloud environment.
