---
description: "Reference for Nitric's .NET library - Create a new bucket notification trigger"
---

# .NET - Bucket.On()

<Note>
  This is reference documentation for the Nitric .NET SDK. To learn about
  Buckets and Storage in Nitric start with the [Storage docs](/storage).
</Note>

Create a new bucket notification trigger when certain files are created or deleted.

```csharp
using System;
using Nitric.Sdk.Resource;
using Nitric.Sdk.Service;
using Application = Nitric.Sdk.Nitric;

var assets = Application.Bucket("assets");

var accessibleAssets = Application.Bucket("assets").Allow(BucketPermission.Read);

// The request will contain the name of the file `Key` and the type of event `NotificationType`
assets.On(BlobEventType.Delete, "*", async (ctx) => {
  Console.WriteLine("A file named " + ctx.Req.Key + "was deleted");

  return ctx;
});

assets.On(BlobEventType.Write, "/images/cat", async (ctx) => {
  Console.WriteLine("A cat image was written");

  return ctx;
});

// If `.On()` is called with a permissioned bucket, a file reference will also be provided with the request
accessibleAssets.On(BlobEventType.Write, "/images/dog", async (ctx) => {
  var dogImage = accessibleAssets.File(ctx.Req.Key).Read();

  Console.WriteLine(dogImage.ToString());

  return ctx;
});

Application.Run();
```

## Parameters

<Properties>
  <Property name="name" required type="string">
    The unique name/reference to the file.
  </Property>
  <Property
    name="notificationType"
    required
    type="BlobEventType.Write | BlobEventType.Delete"
  >
    The notification type for a triggered event, either on a file write or a
    file delete.
  </Property>
  <Property name="notificationPrefixFilter" required type="string">
    The file prefix filter that must match for a triggered event. If multiple
    filters overlap across notifications then an error will be thrown when
    registering the resource.
  </Property>
  <Property
    name="middleware"
    required
    type="Func<BlobEventContext, BlobEventContext>"
  >
    The middleware (code) to be triggered when a bucket event is triggered.
  </Property>
</Properties>

## Available Trigger Types

`BlobEventType.Write`

Triggered when a file in the bucket is created using: `file.Write()`

`BlobEventType.Delete`

Triggered when a file in the bucket is deleted using: `file.Delete()`

## Cloud Trigger Types

| Permission                    | AWS                 | GCP             | Azure                         |
| ----------------------------- | ------------------- | --------------- | ----------------------------- |
| BucketNotificationType.Write  | s3:ObjectCreated:\* | OBJECT_FINALIZE | Microsoft.Storage.BlobCreated |
| BucketNotificationType.Delete | s3:ObjectRemoved:\* | OBJECT_DELETE   | Microsoft.Storage.BlobDeleted |
